<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="libraries/p5.min.js"></script>
    <!-- <script src="sketch.js"></script> -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <script>
   
      let values = [];
      let nStart = 0;
      let nInc = 0.3;
      //

      function setup() {
        createCanvas(windowWidth, windowHeight);
        
        frameRate(noise.value);
        colorMode(HSB, 10, 100, 100, 1);
        // button = createButton('click me');
        // button.position(0, 0);
        // button.mousePressed(changeBG);

       

        for (let i = 0; i < 10; i++) {
          let val = map(i, 0, 9, 0, TWO_PI);
          let n = noise(val);
          values.push(n);
        }
        console.log(values);
      }
      // let slider = document.querySelector('#my-slider')

      //    function changeBG() {
      // let val = random(RGB,25, 40,0);
      //  background(val);

      //     }

      function draw() {
      
       
        //let wawa = sin(frameCount) + mouseX/200;
        background(0);
        let index = 0;
        // for (let x = 0; x < width; x += random(30, 60)) {
        // for (let x = 0; x < width; x += 40) {
        //   for (let y = 0; y < height; y += 40) {

        for (let x = width - 40; x >= -60; x -= 10) {
          for (let y = height; y >= 0; y -= 10) {
            // let rectWidth = map(mouseX, 0, width, 30, 60);
            let rand_index = round(random(index));
            let rand_noise = values[rand_index];
            let rectWidth = map(
              noise(nStart),
              0,
              1,
              random(0, 80),
              random(80, mouseY/100)
            );
            nStart += nInc;
            let noise_value = values[index];
            let r = map(x + y * (noise_value * mouseX/300), 0, width, 0, 20) % 10;
            let g = 255 - r; // Invert the green channel based on the red value
            let b = map(x, 0, width, 255, 0); // Map the blue channel from 255 to 0 based on the x-coordinate

            // if (mouseX >= x && mouseX <= x + rectWidth && mouseY >= y && mouseY <= y + 40) {
            //   x += random(-movementSpeed, movementSpeed); // Move the rectangle horizontally within a range when the mouse hovers
            //   y += random(-movementSpeed, movementSpeed); // Move the rectangle vertically within a range when the mouse hovers
            // }
            // console.log(values[index])
            
            fill(r, 100, 100);
            noStroke();
            translate(mouseX*2, mouseY*2)
            rotate(radians(mouseY))
            rect(x, y, rectWidth, 0.6);
          }
          index++;
          if (index >= 10) {
            index = 0;
          }
        }
      }
    </script>
  </body>
</body>

</body>

</html>
